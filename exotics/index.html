<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>
body {
    background-color: #AAAAAA;
}
.imageWrapper {
  position: relative;
}
.overlayImage {
  position: absolute;
  top: 0;
  left: 0;
  margin: auto;
}
.card {
 /*This is the actual background*/
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
  transition: 0.3s;
  border-radius: 5px; 
  background: #000000;
  color: #FFFFFF;
}
.card:hover {
  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.6);
}
/* Add some padding inside the card container */
.container {
  height: 76px;
  	margin: 4px;
}
img {
	padding: 6px;
	width: 49px;
	height: 64px;	
}
/* Create two equal columns that floats next to each other */
.column {
  float: left;
  width: 45%;
  padding: 15px;
}
/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
@media screen and (max-width:1150px) {
  .column {
    width: 550px;
  }
}
#number {
	width: 3em;
}
</style>
<title>Tilor's Exotic Damage Calculator</title>
</head>
<body onLoad="listEntries()">
<h2>Exotic Damage Calculator</h2>
<p><abbr title="Exotic Particle Generator Points">EPG</abbr>: <span id="EPG">0</span><br>
<abbr title='Category 1 Damage, typically equivalent to 0.5% EPG + "Exotic Damage"'>Cat1</abbr>: <span id="Cat1">0</span><br>
<abbr title='Category 2 Damage, typically equivalent to "Bonus Exotic Damage"'>Cat2</abbr>: <span id="Cat2">0</span><br>
Exotic <abbr title='Critical Hit Chance'>CrtH</abbr>: <span id="CrtH">0</span><br>
Exotic <abbr title='Critical Hit Severity'>CrtD</abbr>: <span id="CrtD">0</span><br>
Auxiliary Power: <span id="AUX"><input id="AUX_NUM" type="number" value="100" min="0" max="200" style="width:3em" onclick="setAux(this,event)" onkeyup="setAux(this,event)"></span><br>
<label for="searchItems">Search: </label>
<input type="text" id="searchItems" name="searchItems" placeholder="Search..." onkeyup="searchItemsFn()" onclick="searchItemsFn()">
<input type="button" value="Clear" onclick="clearSearchFn()"><br>
<label for="restorePointIn">Restore: </label>
<input type="text" id="restorePointIn" name="restorePointIn" placeholder="Restore...">
<input type="button" value="Restore" onclick="restoreItemsFn()">
<input type="button" value="Clear" onclick="clearRestoreFn()">
<input type="button" value="Copy" onclick="createRestoreFn()"> <abbr title='This will copy the restore string to the clipboard'>?</abbr>
<p id="items"></p>
<script>
//Creating an empty array for the stats to be stored in
var totalStats=[0,0,0,0,0,0,0,0,0];
var preTotalStats=[0,0,0,0,0,0,0,0,0];
//The restore point is made with |#|, where the # is the item to be turned on. Obviously, different versions will totally scramble the restore point as items are added
var restorePoint="|";
//Constants are values that make it easy to have constant spelling for things
//Rarities, #s for Mark + Rarity scaling
const rarity = {
COMMON: 1,
UNCOMMON: 2,
RARE: 3,
VERY_RARE: 4,
ULTRA_RARE: 5,
EPIC: 6
};
//Rarity Icons, takes the value from above and puts in an icon from this array
var rarityIcons = ["Common_icon.png", "Uncommon_icon.png", "Rare_icon.png", "Very_rare_icon.png", "Ultra_rare_icon.png", "Epic_icon.png"];
//Stats are referred to and summed up later. The total stats array has values that correspond from each power
const stats = {
EPG: 0,//"Exotic Particle Generator",
Cat1_EXOTIC: 1,//"Cat1 Exotic Damage",
Cat2_EXOTIC: 2,//"Cat2 Exotic Damage",
CrtD_EXOTIC: 3,//"Critical Damage - Exotic",
CrtH_EXOTIC: 4,//"Critical Hit Chance - Exotic",
AUX_POWER: 5,//"Auxiliary Power",
MAX_AUX_POWER: 6,//"Auxiliary Power Capacity Increase"
};
//These are the friendly names for each stat, for printing on the screen
var statsFriendly = ["EPG",//"Exotic Particle Generator",
"Cat1",//"Cat1 Exotic Damage",
"Cat2",//"Cat2 Exotic Damage",
"CrtD",//"Critical Damage - Exotic",
"CrtH",//"Critical Hit Chance - Exotic",
"Aux Power",//"Auxiliary Power",
"Max Aux Power"]//"Auxiliary Power Capacity Increase"
//Maximum Auxiliary Power: <span id="AUXMAX">0</span></p>  Put this back if we want to track max
//So far, everything only scales one of the ways below. This lets us do math based on which way it is
const statScaling = {
FIXED: "Fixed",
MARK_ONLY: "Mark Only",
MARK_AND_RARITY: "Mark and Rarity"
};
//There is no ROMAN function, and this also lets us build the icon name
const ROMAN = [null,"_I_","_II_","_III_","_IV_","_V_","_VI_","_VII_","_VIII_","_IX_","_X_","_XI_","_XII_","_XIII_","_XIV_","_XV_","inf"];
//Some defaults that can be copied down so that things get easier. If max mark increases, change this so everything defaults to max
var defaultMark = 15;
var defaultQty = 1;
//This is the empty array that we will push the list of equipment onto
var equipmentList = [ ];

equipmentList.push({name:"Skill - Starship Exotic Particle Generators Skill",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Science_Skill_4_R1.png",
statItem:[stats.EPG],
statType:[statScaling.FIXED],
statValue:[1],
statContribution:[0],
quantity:1,
maxQty:100,
qtyLabel:"EPG",
unique:true});

equipmentList.push({name:"Specialization - Temporal Operative",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Specialization_Temporal_Operative_icon.png",
statItem:[stats.EPG],
statType:[statScaling.FIXED],
statValue:[50],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Mastery - Enhanced Particle Generators",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"37px-Mastery_passive_enhanced_particle_generators_tac_fed.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
qtyLabel:"Points",
unique:true});

equipmentList.push({name:"Starship Support Configuration - Temporal Ships",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Support_Configuration_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.2],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Attack Pattern Delta Prime",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Attack_Pattern_Delta_Prime_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.015,0.0375],
statContribution:[0,0],
quantity:10,
maxQty:10,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Designated Target",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Mastery_trait_designated_target.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Checkmate",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Check_Mate_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.3],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Emitter Synergy",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Emitter_Synergy_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.075],
statContribution:[0],
quantity:1,
maxQty:3,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Exotic Modulation",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Exotic_Modulation_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.2],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - History Will Remember",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"History_Will_Remember_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.01],
statContribution:[0],
quantity:1,
maxQty:30,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Improved Critical Systems",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Improved_Critical_Systems_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.03,0.15],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Improved Photonic Officer",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Improved_Photonic_Officer_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.25],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Improved Feedback Pulse",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Mastery_trait_improved_feedback_pulse.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.01,0.05],
statContribution:[0,0],
quantity:1,
maxQty:10,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Insidious Tactics",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Insidious_Tactics_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.01,0.05],
statContribution:[0,0],
quantity:1,
maxQty:3,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Kick Them While They're Down",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Kick_Them_While_Theyre_Down_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.05],
statContribution:[0],
quantity:1,
maxQty:5,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Numerical Superiority",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Numerical_Superiority_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.3],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Partners in Arms",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Partners_In_Arms_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:3,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Time to Kill",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Time_to_Kill_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:3,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Superior Pedal to the Metal",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Pedal_to_the_Metal_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.03],
statContribution:[0],
quantity:1,
maxQty:10,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Improved Petal to the Metal",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Pedal_to_the_Metal_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.02],
statContribution:[0],
quantity:1,
maxQty:10,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Petal to the Metal",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Pedal_to_the_Metal_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.01],
statContribution:[0],
quantity:1,
maxQty:10,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Starship Trait - Strike from Shadows",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Strike_from_Shadows_icon.png",
statItem:[stats.CrtD_EXOTIC,stats.Cat2_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.05,0.05],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Terran Machinations",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Terran_Machinations_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.3],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Unconventional Tactics",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Unconventional_Tactics_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Starship Trait - Improved Unconventional Tactics",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Unconventional_Tactics_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.2],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Personal Trait - Anchored",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Anchored_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.05],
statContribution:[0],
quantity:1,
maxQty:4,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Personal Trait - Conservation of Energy",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Conservation_of_Energy_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:4,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Personal Trait - Context is for Kings",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Context_is_for_Kings_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.01],
statContribution:[0],
quantity:1,
maxQty:10,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Personal Trait - Duelist's Fervor",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Duelists_Fervor_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.05],
statContribution:[0],
quantity:1,
maxQty:3,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Personal Trait - Enlightened",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Enlightened_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Personal Trait - Fleet Coordinator",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Fleet_Coordinator_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.02],
statContribution:[0],
quantity:1,
maxQty:5,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Personal Trait - Inspirational Leader",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Inspirational_Leader_icon.png",
statItem:[stats.EPG],
statType:[statScaling.FIXED],
statValue:[10],
statContribution:[0],
quantity:1,
maxQty:3,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Personal Trait - Operative",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Operative_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.01,0.02],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Personal Trait - Particle Manipulator",//This one is special...
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Particle_Manipulator_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:["PM CrtH","PM CrtD"],
statValue:[0,0],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Personal Trait - Positive Feedback Loop",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Positive_Feedback_Loop_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Personal Trait - Romulan Operative",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Romulan_Operative_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.015,0.0375],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Personal Trait - Terran Targeting Systems",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Terran_Targeting_Systems_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Advanced Targeting Systems (T5)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Advanced_Targeting_Systems_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.16],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Precision (T5)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Precision_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.04],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Particle Generator Amplifier (T5)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Particle_Generator_Amplifier_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.05],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Counter-Stroke (T5)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Counter-Stroke_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.35],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Auxiliary Power Configuration - Offense (T5)",//This one is special too...
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Auxiliary_Power_Configuration_-_Offense_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:["APC5"],
statValue:[0],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Advanced Targeting Systems (T6)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Advanced_Targeting_Systems_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.2],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Precision (T6)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Precision_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.05],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Particle Generator Amplifier (T6)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Particle_Generator_Amplifier_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.0625],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Counter-Stroke (T6)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Counter-Stroke_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.4375],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Auxiliary Power Configuration - Offense (T6)",//This one is special too...
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Auxiliary_Power_Configuration_-_Offense_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:["APC6"],
statValue:[0],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Captain Power - Attack Pattern Alpha III",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Attack_Pattern_Alpha_icon_Klingon.png",
statItem:[stats.Cat2_EXOTIC,stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED,statScaling.FIXED],
statValue:[0.496,0.0496,0.496],
statContribution:[0,0,0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - Decloak Ambush",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Voth_Cloak_icon_Romulan.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - Decloak Ambush + Bridge Officers - Subterfuge",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Subterfuge_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.25],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - Decloak Ambush + Bridge Officers - Superior Subterfuge",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Subterfuge_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.3],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Captain Power - Focus Frenzy + Frenzied Assault",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Focused_Frenzy_icon_Federation.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.08],
statContribution:[0],
quantity:1,
maxQty:5,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Captain Power - Go Down Fighting",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Go_Down_Fighting_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.01],
statContribution:[0],
quantity:1,
maxQty:100,
qtyLabel:"Health Lost %",
unique:true});

equipmentList.push({name:"Reputation Trait - Quantum Singularity Manipulation (T5)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Quantum_Singularity_Manipulation_icon.png",
statItem:[stats.EPG],
statType:[statScaling.FIXED],
statValue:[100],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Reputation Trait - Quantum Singularity Manipulation (T6)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Quantum_Singularity_Manipulation_icon.png",
statItem:[stats.EPG],
statType:[statScaling.FIXED],
statValue:[125],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Captain Power - Scattering Field",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Scattering_Field_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.236],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Captain Power - Tactical Fleet III",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Tactical_Fleet_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.374],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Bridge Officer Ability - Attack Pattern Omega I, II",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Attack_Pattern_Omega_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Bridge Officer Ability - Attack Pattern Omega III",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Attack_Pattern_Omega_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.249],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Bridge Officer Ability - Emergency Power to Auxiliary",
active:false,
mark:3,
rarity:rarity.COMMON,
icon:"Emergency_Power_to_Auxiliary_icon_Klingon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_ONLY],
statValue:[5],
statContribution:[0],
quantity:1,
maxQty:1,
markLabel:"Rank: ",
unique:false});

equipmentList.push({name:"Bridge Officer Ability - Fly Her Apart",
active:false,
mark:3,
rarity:rarity.COMMON,
icon:"Fly_Her_Apart_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC,stats.Cat2_EXOTIC],
statType:[statScaling.FIXED,statScaling.MARK_ONLY],
statValue:[0.01,0.005],
statContribution:[0],
quantity:1,
maxQty:15,
markLabel:"Rank: ",
qtyLabel:"Seconds",
unique:false});

equipmentList.push({name:"Bridge Officer Ability - Focused Assault",
active:false,
mark:3,
rarity:rarity.COMMON,
icon:"Focused_Assault_icon_Klingon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.MARK_ONLY],
statValue:[0.05],
statContribution:[0],
quantity:1,
maxQty:1,
markLabel:"Rank: ",
qtyLabel:"Seconds",
unique:false});

equipmentList.push({name:"Modifier - Warp Core with [AMP]",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Matter_Anti-Matter_Warp_Core_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.033],
statContribution:[0],
quantity:1,
maxQty:4,
qtyLabel:"AMP Stacks",
unique:true});

equipmentList.push({name:"Bridge Officers - Basic Romulan Operative",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Romulan_Operative_icon.png",
statItem:[stats.CrtD_EXOTIC,stats.CrtH_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.05,0.01],
statContribution:[0,0],
quantity:1,
maxQty:6,
qtyLabel:"Officers",
unique:true});

equipmentList.push({name:"Chronometric Energy Converter - Weapon Power",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Chronometric_Energy_Converter_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.002],
statContribution:[0],
quantity:75,
maxQty:200,
qtyLabel:"Weapon Power",
unique:true});

equipmentList.push({name:"Chronometric Energy Converter - Base Bonus",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Chronometric_Energy_Converter_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.076],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Modifier - Deflector with [ColCrit]",//special case
active:false,
mark:1,
rarity:rarity.ULTRA_RARE,
icon:"Elite_Fleet_Intervention_Protomatter_Deflector_Array_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:["ColCrit"],
statValue:[0.0004],
statContribution:[0],
quantity:100,
maxQty:100,
qtyLabel:"Hull %",
unique:true});

equipmentList.push({name:"Set Bonus - Delphic Particle Accelerators 2pc",
active:false,
mark:1,
rarity:rarity.VERY_RARE,
icon:"Console_-_Universal_-_Interphase_Quantum_Distributor_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Set Bonus - Tholian Technologies 2pc",
active:false,
mark:1,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Tholian_Web_Cannon_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0.1],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Personal Endeavour - Exotic Damage",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Exotic_Personal_Endevour_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.02],
statContribution:[0],
quantity:1,
maxQty:15,
qtyLabel:"Points",
unique:true});

equipmentList.push({name:"Battery - Exotic Particle Flood",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Battery_-_Exotic_Particle_Flood_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.2],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Set Bonus - Flagship Technologies 2pc",
active:false,
mark:1,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Flagship_Tactical_Computer_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.02],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Fleet Combat Buff",
active:false,
mark:3,
rarity:rarity.COMMON,
icon:"Science_Skill_4_R1.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.05],
statContribution:[0],
quantity:1,
maxQty:1,
markLabel:"Tier",
unique:true});

equipmentList.push({name:"Bridge Officers - Pirate Trait",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Pirate_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.015],
statContribution:[0],
quantity:1,
maxQty:6,
qtyLabel:"Officers",
unique:true});

equipmentList.push({name:"Bridge Officers - Romulan Operative Trait",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Romulan_Operative_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.015,.0375],
statContribution:[0,0],
quantity:1,
maxQty:6,
qtyLabel:"Officers",
unique:true});

equipmentList.push({name:"Bridge Officers - Superior Romulan Operative Trait",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Romulan_Operative_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.02,0.05],
statContribution:[0,0],
quantity:1,
maxQty:6,
qtyLabel:"Officers",
unique:true});

equipmentList.push({name:"Prevailing Resilient Shield Array",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Prevailing_Innervated_Resilient_Shield_Array_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.01,0.1],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Set Bonus - Protonic Arsenal 2pc",
active:false,
mark:1,
rarity:rarity.VERY_RARE,
icon:"Console_-_Universal_-_Proton_Particle_Stabilizer_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.03],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Set Bonus - Protonic Arsenal 3pc",
active:false,
mark:1,
rarity:rarity.VERY_RARE,
icon:"Console_-_Universal_-_Proton_Particle_Stabilizer_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Set Bonus - Radiant Subatomic Pulse 4pc",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Radiant_Subatomic_Pulse_icon_Federation.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.333],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Technician Duty Officer - Exotic Damage on use of Emergency Power to Aux",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Bulkhead_Technician_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.25],
statContribution:[0],
quantity:1,
maxQty:3,
qtyLabel:"Officers",
unique:true});

equipmentList.push({name:"Set Bonus - Lorca's Ambition 2pc",
active:false,
mark:1,
rarity:rarity.VERY_RARE,
icon:"Console_-_Tactical_-_Lorcas_Custom_Fire_Controls_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.01],
statContribution:[0],
quantity:1,
maxQty:25,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Active Power - Adaptive Emergency Systems (High Hull HP)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Adaptive_Emergency_Systems_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.3],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - Adaptive Emergency Systems (Low Hull HP)",
active:false,
mark:1,
rarity:rarity.COMMON,
icon:"Adaptive_Emergency_Systems_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.45],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Engineering - Conductive RCS Accelerator [EPG]",
active:false,
mark:defaultMark,
rarity:rarity.ULTRA_RARE,
icon:"Console_-_Engineering_-_Conductive_RCS_Accelerator_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[1.875],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Science - Exotic Particle Field Exciter [EPG]",
active:false,
mark:defaultMark,
rarity:rarity.ULTRA_RARE,
icon:"Console_-_Science_-_Exotic_Particle_Field_Exciter_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[3.75],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Science - Exotic Particle Field Exciter [not-EPG]",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Science_-_Exotic_Particle_Field_Exciter_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[1.875],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Science - Particle Generator",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Science_-_Particle_Generator_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[1.875],
statContribution:[0],
quantity:1,
maxQty:6,
unique:false});

equipmentList.push({name:"Console - Science - Shield Refrequencer [EPG]",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Science_-_Shield_Refrequencer_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[1.25],
statContribution:[0],
quantity:1,
maxQty:6,
unique:false});

equipmentList.push({name:"Console - Science - Threat Scaling Console",
active:false,
mark:defaultMark,
rarity:rarity.ULTRA_RARE,
icon:"Console_-_Science_-_Plasma-Generating_Weapon_Signature_Amplifier_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[1.875],
statContribution:[0],
quantity:1,
maxQty:6,
unique:false});

equipmentList.push({name:"Console - Science - Exotic Particle Focuser [EPG Primary]",
active:false,
mark:defaultMark,
rarity:rarity.ULTRA_RARE,
icon:"Console_-_Science_-_Exotic_Particle_Focuser_icon.png",
statItem:[stats.EPG,stats.Cat2_EXOTIC],
statType:[statScaling.MARK_AND_RARITY,statScaling.FIXED],
statValue:[1.875,0.075],
statContribution:[0,0],
quantity:1,
maxQty:6,
unique:false});

equipmentList.push({name:"Console - Science - Exotic Particle Focuser [EPG Secondary]",
active:false,
mark:defaultMark,
rarity:rarity.ULTRA_RARE,
icon:"Console_-_Science_-_Exotic_Particle_Focuser_icon.png",
statItem:[stats.EPG,stats.Cat2_EXOTIC],
statType:[statScaling.MARK_AND_RARITY,statScaling.FIXED],
statValue:[1.25,0.075],
statContribution:[0,0],
quantity:1,
maxQty:6,
unique:false});

equipmentList.push({name:"Console - Science - Temporally Shielded Datacore",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Science_-_Temporally_Shielded_Datacore_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[1.25],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Tactical - Chronometric Capacitor",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Tactical_-_Chronometric_Capacitor_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[1.875],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Universal - Nukara Particle Converter",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Universal_-_Nukara_Particle_Converter_icon.png",
statItem:[stats.EPG],
statType:[statScaling.MARK_AND_RARITY],
statValue:[1.0833],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Universal - Auxiliary Ejection Assembly",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Auxiliary_Ejection_Assembly_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.178],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Disruption Pulse Emitter",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Disruption_Pulse_Emitter_icon.png",
statItem:[stats.EPG],
statType:[statScaling.FIXED],
statValue:[20],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Causal Anchor",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Causal_Anchor_icon.png",
statItem:[stats.Cat1_EXOTIC,stats.CrtH_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.15,0.02],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Constriction Anchor",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Constriction_Anchor_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.237],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Delphic Tear Generator",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Delphic_Tear_Generator_icon.png",
statItem:[stats.Cat2_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.FIXED,statScaling.FIXED],
statValue:[0.2,0.05],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - D.O.M.I.N.O.",
active:false,
mark:defaultMark,
rarity:rarity.COMMON,
icon:"DOMINO_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.25],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - Dynamic Power Redistributor Module",
active:false,
mark:defaultMark,
rarity:rarity.COMMON,
icon:"Dynamic_Power_Redistributor_icon_Federation.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.4],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Set Bonus - Flagship Technologies 3pc",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Adaptive_Emergency_Systems_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:1,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Console - Universal - Isometric Dispersal Array",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Isometric_Dispersal_Array_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.08],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - M6 Computer",
active:false,
mark:defaultMark,
rarity:rarity.COMMON,
icon:"Advanced_Tactical_Computer_icon_Federation.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Metaphasic Solar Capacitor",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Metaphasic_Solar_Capacitor_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.131],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - Metaphasic Solar Capacitor",
active:false,
mark:defaultMark,
rarity:rarity.COMMON,
icon:"Activate_Metaphasic_Solar_Capacitor_icon_Federation.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.262],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Active Power - Particle Conversion Matrix",
active:false,
mark:defaultMark,
rarity:rarity.COMMON,
icon:"Particle_Conversion_Matrix_icon_Federation.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:10,
qtyLabel:"Stacks",
unique:true});

equipmentList.push({name:"Console - Universal - Point Defense Bombardment Warhead",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Point_Defense_Bombardment_Warhead_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.01],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Quantum Deceleration Field Generator",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Quantum_Deceleration_Field_Generator_i.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Radiation Bombardment Matrix",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Radiation_Bombardment_Matrix_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.15],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Resonant Dissipation Matrix",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Resonant_Dissipation_Matrix_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.05],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Sensor Probe Swarm",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Sensor_Probe_Swarm_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.075],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Spatial Sinkhole Generator",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Spatial_Sinkhole_Generator_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.075],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Temporal Distortion Field",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Temporal_Distortion_Field_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.075],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Temporal Rift Stabilizer",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Temporal_Rift_Stabilizer_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.06],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Warp Burst Capacitor",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Warp_Burst_Capacitor_icon.png",
statItem:[stats.Cat2_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.1],
statContribution:[0],
quantity:1,
maxQty:1,
unique:true});

equipmentList.push({name:"Console - Universal - Assimilated Module",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Universal_-_Assimilated_Module_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.MARK_AND_RARITY,statScaling.MARK_AND_RARITY],
statValue:[0.0005757,0.005757],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Various - Bellum Console",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Science_-_Nanite-Reinforced_Circuitry_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.MARK_AND_RARITY],
statValue:[0.00075],
statContribution:[0],
quantity:1,
maxQty:12,
unique:false});

equipmentList.push({name:"Console - Science - Bellum Particle Generator",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Science_-_Particle_Generator_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.EPG],
statType:[statScaling.MARK_AND_RARITY,statScaling.MARK_AND_RARITY],
statValue:[0.00075,1.25],
statContribution:[0,0],
quantity:1,
maxQty:6,
unique:false});

equipmentList.push({name:"Console - Universal - Bioneural Infusion Circuits",
active:false,
mark:defaultMark,
rarity:rarity.RARE,
icon:"Console_-_Bioneural_Infusion_Circuits_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.MARK_AND_RARITY],
statValue:[0.0125],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Universal - Interphase Quantum Distributor",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Universal_-_Interphase_Quantum_Distributor_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.MARK_AND_RARITY],
statValue:[0.0094],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Universal - Lorca's Custom Fire Controls",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Tactical_-_Lorcas_Custom_Fire_Controls_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.MARK_AND_RARITY],
statValue:[0.001875],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Universal - Tachyokinetic Converter",
active:false,
mark:defaultMark,
rarity:rarity.RARE,
icon:"Console_-_Tachyokinetic_Converter_icon.png",
statItem:[stats.CrtH_EXOTIC,stats.CrtD_EXOTIC],
statType:[statScaling.MARK_AND_RARITY,statScaling.MARK_AND_RARITY],
statValue:[0.000625,0.00625],
statContribution:[0,0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Tactical - Vulnerability Exploiter",
active:false,
mark:defaultMark,
rarity:rarity.ULTRA_RARE,
icon:"Console_-_Tactical_-_Vulnerability_Exploiter_icon.png",
statItem:[stats.CrtD_EXOTIC],
statType:[statScaling.MARK_AND_RARITY],
statValue:[0.004707],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Tactical - Vulnerability Locator",
active:false,
mark:defaultMark,
rarity:rarity.ULTRA_RARE,
icon:"Console_-_Tactical_-_Vulnerability_Locator_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.MARK_AND_RARITY],
statValue:[0.00095],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Universal - Zero Point Energy Conduit",
active:false,
mark:defaultMark,
rarity:rarity.VERY_RARE,
icon:"Console_-_Universal_-_Zero_Point_Energy_Conduit_icon.png",
statItem:[stats.CrtH_EXOTIC],
statType:[statScaling.MARK_AND_RARITY],
statValue:[0.001125],
statContribution:[0],
quantity:1,
maxQty:1,
unique:false});

equipmentList.push({name:"Console - Universal - Interphasic Instability",
active:false,
mark:defaultMark,
rarity:rarity.EPIC,
icon:"Console_-_Universal_-_Interphasic_Instability_icon.png",
statItem:[stats.Cat1_EXOTIC],
statType:[statScaling.FIXED],
statValue:[0.05],
statContribution:[0.05],
quantity:1,
maxQty:1,
unique:true});
//End of the equipment list

//POWERS---------------------------------------------------------------------------------------------
//Again, another empty array that we push powers into
var powerList = [ ];

powerList.push({name:"Anti-Time Entanglement Singularity",
levels:1,
icon:"Anti-Time_Entanglement_Singularity_icon.png",
auxScale:true,
equation:"A",
base:[0,498.326],
baseCat1:1.882,
damageType:"Physical"});

powerList.push({name:"Delphic Tear",
levels:1,
icon:"Delphic_Tear_icon_Federation.png",
auxScale:true,
equation:"A",
base:[0,142.57],
baseCat1:1.86,
damageType:"Radiation"});

powerList.push({name:"Tholian Web Cannon - Inital Blast",
levels:1,
icon:"Tholian_Web_Cannon_icon_Federation.png",
auxScale:true,
equation:"TWC",
base:[0,881.650],
baseCat1:1.86,
damageType:"Physical"});

powerList.push({name:"Tholian Web Cannon - DoT",
levels:1,
icon:"Tholian_Web_Cannon_icon_Federation.png",
auxScale:true,
equation:"TWC",
base:[0,470.450],
baseCat1:1.86,
damageType:"Physical"});

powerList.push({name:"Drain Infection",
levels:1,
icon:"Science_Skill_4_R1.png",
auxScale:true,
equation:"A",
base:[0,109.974],
baseCat1:1.9225,
damageType:"Electrical"});

powerList.push({name:"Engineering - Aceton Beam",
levels:3,
icon:"Aceton_Beam_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,200,300,400],
baseCat1:1.8615,
damageType:"Radiation"});

powerList.push({name:"Science - Destabilizing Resonance Beam",
levels:3,
icon:"Destabilizing_Resonance_Beam_icon_Federation.png",
auxScale:false,
equation:"B",
base:[0,120,150,180],
baseCat1:1.8690,
damageType:"Radiation"});

powerList.push({name:"Engineering - Eject Warp Plasma",
levels:3,
icon:"Eject_Cryoplasma_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,135,180,225],
baseCat1:1.9219,
damageType:"Plasma"});

powerList.push({name:"Temporal - Chronometric Inversion Field",
levels:3,
icon:"Chronometric_Inversion_Field_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,139.3,181.1,222.9],
baseCat1:1.8874,
damageType:"Physical"});

powerList.push({name:"Temporal - Channeled Deconstruction",
levels:3,
icon:"Channeled_Deconstructio_icon.png",
auxScale:false,
equation:"A",
base:[0,89.613,116.467,143.322],
baseCat1:1.8830,
damageType:"Physical"});

powerList.push({name:"Temporal - Entropic Cascade (Primary)",
levels:3,
icon:"Entropic_Cascade_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,200,260,320],
baseCat1:1.8615,
damageType:"Physical"});

powerList.push({name:"Temporal - Entropic Redistribution (Primary)",
levels:3,
icon:"Entropic_Redistribution_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,1003,1304,1605],
baseCat1:1.8622,
damageType:"Physical"});

powerList.push({name:"Temporal - Rapid Decay",
levels:3,
icon:"Rapid_Decay_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,250,350,450],
baseCat1:1.8707,
damageType:"Physical"});

powerList.push({name:"Temporal - Timeline Collapse",
levels:3,
icon:"Timeline_Collapse_icon_Federation.png",
auxScale:false,
equation:"TC",
base:[0,1461.187,1607.542,1753.896],
baseCat1:1.8786,
damageType:"Physical"});

powerList.push({name:"Engineering - Endothermic Inhibitor Beam",
levels:3,
icon:"Endothermic_Inhibitor_Beam_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,120,156,192],
baseCat1:1.8617,
damageType:"Radiation"});

powerList.push({name:"Engineering - Structural Integrity Collapse",
levels:3,
icon:"Structural_Integrity_Collapse_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,120,156,192],
baseCat1:1.8617,
damageType:"Physical"});

powerList.push({name:"Science - Gravity Well",
levels:3,
icon:"Gravity_Well_icon_Federation.png",
auxScale:true,
equation:"A",
base:[0,161.306,215.105,268.905],
baseCat1:1.8849,
damageType:"Kinetic"});

powerList.push({name:"Science - Subspace Vortex",
levels:3,
icon:"Subspace_Vortex_icon_Federation.png",
auxScale:true,
equation:"A",
base:[0,189,252,315],
baseCat1:0,
damageType:"Kinetic"});

powerList.push({name:"Science - Photonic Shockwave",
levels:3,
icon:"Photonic_Shockwave_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,1800,2400,3000],
baseCat1:1.8616,
damageType:"Kinetic"});

powerList.push({name:"Science - Tractor Beam",
levels:3,
icon:"Tractor_Beam_icon_Federation.png",
auxScale:false,
equation:"B",//B scales with EPG separately from Cat1
base:[0,30,40,50],
baseCat1:0,
damageType:"Kinetic"});

powerList.push({name:"Science - Tractor Beam Repulsors",
levels:3,
icon:"Tractor_Beam_Repulsors_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,250,332.5,415],
baseCat1:1.8620,
damageType:"Kinetic"});

powerList.push({name:"Science - Feedback Pulse",
levels:3,
icon:"Feedback_Pulse_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,0.1,0.15,0.2],
baseCat1:0,
damageType:"Exotic"});

powerList.push({name:"Science - Tyken's Rift",
levels:3,
icon:"Tykens_Rift_icon_Federation.png",
auxScale:false,
equation:"A",
base:[0,215.000,286.625,358.250],
baseCat1:1.8863,
damageType:"Kinetic"});

//MATHS----------------------------------------------------------------------------------------------
function flipColor(cardID) {
var powerID = cardID.id.replace("cardNo","");//Get the equipment ID number
equipmentList[powerID].active = !equipmentList[powerID].active;
if (equipmentList[powerID].active) {
cardID.style.background = '#222288';
}
else {
cardID.style.background = '#000000';
}
updateTotals();
}
//This will set the AUX power from the input at the top of the website, this will persist even if all of the consoles have +power because of power setting
function setAux(cardID,event) {
totalStats[stats.AUX_POWER] = cardID.value;
updateTotals();
}
//This is the function that scales the rarity up and down
function rarClick(cardID,event) {
	event.stopPropagation();//Prevents the buttons on the card from flipping the card color
var mainCard = cardID.parentNode.parentNode.parentNode;//Go up the tree to get the ID of the full card, not just the button
var powerID = mainCard.id.replace("cardNo","");//Get the equipment ID number
var disengage = equipmentList[powerID].active;//If the equipment is active, it will be deactivated before continuing
var rarityUP = (cardID.value == "Upgrade Rarity");//If the button pushed is "Upgrade", true, otherwise, false ("downgrade")
var rarityCurrent;//variable for the current rarity
var rarityNew;//variable for the new rarity
	if (disengage) {//if the card is turned on, turn it off before upgrading
		flipColor(mainCard);
	}
	rarityCurrent = equipmentList[powerID].rarity;//Get the current rarity from the list
	if (rarityUP) {//If you want to upgrade the rarity...
		rarityNew = Math.min(rarityCurrent + 1, 6);//Max out at 6, which is currently the highest rarity
	}
	else if (!rarityUP) {//And if you want to downgrade...
		rarityNew = Math.max(rarityCurrent - 1, 1);//Min out at 1, which is the lowest rarity
	}
	else {
		alert("There is an error with rarity selection");//It's a boolean, so we should never see this case
	}
	equipmentList[powerID].rarity = rarityNew;//Change the item in the array to the new rarity
	mainCard.children[0].children[1].src = mainCard.children[0].children[1].src.replace(rarityIcons[rarityCurrent-1], rarityIcons[rarityNew-1]);//Change the rarity icon to the new rarity icon
	if (disengage) {//if the card was turned on before, turn it back on, otherwise leave it alone
		flipColor(mainCard);
	}
}
//This function upgrades or downgrades the rarity
function upgClickSpin(cardID,event) {
	event.stopPropagation();//Prevents the buttons on the card from flipping the card color
var mainCard = cardID.parentNode.parentNode.parentNode;//Go up the tree to get the ID of the full card, not just the button
var markCurrent;//Variable for the current mark
var powerID = mainCard.id.replace("cardNo","");//Get the equipment ID number
var disengage = equipmentList[powerID].active;//If the equipment is active, it will be deactivated before continuing
var markNew = cardID.value;//This is the value from the number input, which is to set the new mark
	if (disengage) {//if the card is turned on, turn it off before upgrading
		flipColor(mainCard);
	}
	markCurrent = equipmentList[powerID].mark;//Get the current mark from the list
	equipmentList[powerID].mark = Number(markNew);//Set the mark back into the equipment list
	mainCard.children[0].children[2].src = mainCard.children[0].children[2].src.replace(ROMAN[markCurrent], ROMAN[markNew]);//Change the icon for the mark to the new mark
	if (disengage) {//if the card was turned on before, turn it back on, otherwise leave it alone
		flipColor(mainCard);
	}
}
//This function controls the quantity multiplier
function qtyClickSpin(cardID,event) {
	event.stopPropagation();//Prevents the buttons on the card from flipping the card color
var mainCard = cardID.parentNode.parentNode.parentNode;//Go up the tree to get the ID of the full card, not just the button
var qtyCurrent;//Variable to store the current quantity
var qtyNew = cardID.value;//This is the value from the number input, which is to set the new quantity
var powerID = mainCard.id.replace("cardNo","");//Get the equipment ID number
var disengage = equipmentList[powerID].active;//If the equipment is active, it will be deactivated before continuing
	if (disengage) {//if the card is turned on, turn it off before upgrading
		flipColor(mainCard);
	}
	qtyCurrent = equipmentList[powerID].quantity;//Get the current quantity from the list
	equipmentList[powerID].quantity = Number(qtyNew);//Set the new quantity to the list
	if (disengage) {//if the card was turned on before, turn it back on, otherwise leave it alone
		flipColor(mainCard);
	}
}

//Function that can push things to the clipboard
function copyStringToClipboard (str) {
   // Create new element
   var el = document.createElement('textarea');
   // Set value (string to be copied)
   el.value = str;
   // Set non-editable to avoid focus and move outside of view
   el.setAttribute('readonly', '');
   el.style = {position: 'absolute', left: '-9999px'};
   document.body.appendChild(el);
   // Select text inside element
   el.select();
   // Copy text to clipboard
   document.execCommand('copy');
   // Remove temporary element
   document.body.removeChild(el);
}

//Search function that hides everything that doesn't match the search
function searchItemsFn() {
	var searchText = document.getElementById("searchItems").value;//Get the search string
	var cardELEMENT = document.getElementsByClassName('card');//Get all of the cards
	for (var x = 0; x < cardELEMENT.length; x++) {//Loop through each card
		if(cardELEMENT[x].innerHTML.toUpperCase().indexOf(searchText.toUpperCase()) > -1) {//If there isn't a matching string in the HTML of the card...
			cardELEMENT[x].hidden = false;//Hide the card
		}
		else {//Otherwise...
			cardELEMENT[x].hidden = true;//show the card
		}
	}//Obviously an empty search string matches everything
}
//Takes a restore string and turns on and off cards that match it
function restoreItemsFn() {
	var searchText = document.getElementById("restorePointIn").value;//Get the search string (only on the Restore button press)
	var cardELEMENT = document.getElementsByClassName('card');//Get all of the cards
	searchText = searchText.split("|");
	for (var itemNum = 0; itemNum < equipmentList.length; itemNum++) {
		if (equipmentList[itemNum].active) {
			flipColor(cardELEMENT[itemNum]);
		}
	}
	for (var restoreItem = 1; restoreItem < searchText.length-1; restoreItem++) {
		var restoreElement = searchText[restoreItem].split(".");
		var itemNum = restoreElement[0];
		if (restoreElement.length > 1) {
			for (var restorePiece = 1; restorePiece < restoreElement.length; restorePiece++) {
				var itemElement = restoreElement[restorePiece];
				if (itemElement.indexOf("q") > -1 && equipmentList[itemNum].maxQty > 1) {
					equipmentList[itemNum].quantity = Number(itemElement.replace("q",""));
					document.getElementById("quantityNumber" + itemNum).value = equipmentList[itemNum].quantity;
				}
				else if (itemElement.indexOf("m") > -1 && !equipmentList[itemNum].unique) {
					var markCurrent = equipmentList[itemNum].mark;
					equipmentList[itemNum].mark = Number(itemElement.replace("m",""));
					cardELEMENT[itemNum].children[0].children[2].src = cardELEMENT[itemNum].children[0].children[2].src.replace(ROMAN[markCurrent], ROMAN[equipmentList[itemNum].mark]);//Change the icon for the mark to the new mark
					document.getElementById("markNumber" + itemNum).value = equipmentList[itemNum].mark;
				}
				else if (itemElement.indexOf("r") > -1 && !equipmentList[itemNum].unique) {
					var rarityCurrent = equipmentList[itemNum].rarity;
					equipmentList[itemNum].rarity = Number(itemElement.replace("r",""));
					cardELEMENT[itemNum].children[0].children[1].src = cardELEMENT[itemNum].children[0].children[1].src.replace(rarityIcons[rarityCurrent-1], rarityIcons[equipmentList[itemNum].rarity-1]);//Change the rarity icon to the new rarity icon
				}
			}
		}
		sumStats(itemNum,0);
		if (!equipmentList[itemNum].active) {
			flipColor(cardELEMENT[itemNum]);
		}
	}
}
//clears the search box
function clearSearchFn() {
document.getElementById("searchItems").value = ""
searchItemsFn();
}
//Clears the restore input box
function clearRestoreFn() {
document.getElementById("restorePointIn").value = ""
}
//Pushes the restore string that is in the background to the clipboard for easy sharing
function createRestoreFn() {
copyStringToClipboard(restorePoint);
}
//Compare used for the sorting of the lists
function compare(a,b) {
	if (a.name < b.name) {
		return -1;
	}
	if (a.name > b.name) {
		return 1;
	}
	return 0;
}
//This function runs on page load and generates all of the cards
function listEntries() {
equipmentList.sort(compare);//Sort the equipment
powerList.sort(compare);//Sort the powers
document.getElementById('AUX_NUM').value = '100';//Reset the AUX to 100
totalStats[stats.AUX_POWER] = 100;//Reset the AUX to 100
  
var lenEq = equipmentList.length;//Get the number of equipments

var baseMessageItem = '<div class="row">'+//This is the base HTML for a card, but has fillers based on what is chosen or not
'<div class="card" onClick="flipColor(this)" style="background: rgb(0, 0, 0);" id=CARD_ID>'+
	'<div class="imageWrapper">'+
		'<img class="overlayImage" src="img/ITEM_ICON" alt="Icon">'+
		'<img class="overlayImage" src="img/RARITY_ICON" alt="Rarity" id="rarity_icon">'+
		'MK_INSTANCE'+
	'</div><div class="container">'+
		'<p style="margin-left: 57px; padding-top: 5px">BLURB'+
		'CONTRIBUTIONS'+
		'SCALING_NOTE'+
		'RARITY_BUTTONS'+
		'QTY_NOTE' +
'</p></div></div></div>';
var messageData = "";
for (var x = 0; x < lenEq; x++) {//Loop through all of the items

	messageData += baseMessageItem;

	//Input the actual string and display card
	if (equipmentList[x].icon != undefined) {
	messageData = messageData.replace("ITEM_ICON", equipmentList[x].icon);
	}
	else
	{
	messageData = messageData.replace("ITEM_ICON", 'MissingNO_icon.png');
	}
	if (equipmentList[x].unique) {
	messageData = messageData.replace('SCALING_NOTE', '');
	messageData = messageData.replace('MK_INSTANCE', '');
	messageData = messageData.replace('RARITY_BUTTONS', '');
	}
	else {
		var markNote = "Mark: "
		if (equipmentList[x].markLabel != undefined) {
			markNote = equipmentList[x].markLabel;
			messageData = messageData.replace('RARITY_BUTTONS', '');
		}
		else {
			messageData = messageData.replace('RARITY_BUTTONS', '<input type="button" value="Upgrade Rarity" onClick="rarClick(this,event)">'+
			'<input type="button" value="Downgrade Rarity" onClick="rarClick(this,event)">');
		}
	messageData = messageData.replace('SCALING_NOTE', '<br>' + markNote + ' <input type="number" value="'+ equipmentList[x].mark +'" min="1" max="'+equipmentList[x].mark+'" onclick="upgClickSpin(this,event)" onkeyup="upgClickSpin(this,event)" id="markNumber'+x+'" style="width:3em" required>');
	messageData = messageData.replace('MK_INSTANCE', '<img class="overlayImage" src="img/MkMARK_ICONicon.png" alt="Mark" id="mk_icon">');
	}

	messageData = messageData.replace("RARITY_ICON", rarityIcons[equipmentList[x].rarity-1]);
	messageData = messageData.replace("BLURB", equipmentList[x].name);
	messageData = messageData.replace("MARK_ICON", ROMAN[equipmentList[x].mark]);
	messageData = messageData.replace("CONTRIBUTIONS", '<span id="contrib'+x+'" style="float:right; margin-right: 10px;color: #998877;">+0</span>');
	messageData = messageData.replace("CARD_ID", 'cardNo' + x);
	var qtyNote= "Quantity";
	if (equipmentList[x].qtyLabel != undefined) {
		qtyNote = equipmentList[x].qtyLabel;
	}
	
	if (equipmentList[x].maxQty != 1) {
	messageData = messageData.replace('QTY_NOTE', '<br>'+ qtyNote +': <input type="number" value="'+equipmentList[x].quantity+'" min="1" max="'+ equipmentList[x].maxQty +'" onclick="qtyClickSpin(this,event)" onkeyup="qtyClickSpin(this,event)" id="quantityNumber'+x+'" style="width:3em" required>');
	}
	else {
	messageData = messageData.replace('QTY_NOTE', '');
	}


}
document.getElementById('items').innerHTML = '<div class="column">' + messageData + '</div>';
//Now that we have all of the cards, we have to sum all of the stats in order to display on the cards
for (var x = 0; x < lenEq; x++) {
sumStats(x,0);
}
//Output powers
var baseMessagePower = '<div class="row">'+
'<div class="card" style="background: rgb(0, 0, 0);">'+
	'<div class="imageWrapper">'+
		'<img class="overlayImage" src="img/POWER_ICON" alt="Icon">'+
	'</div><div class="container">'+
		'<p style="margin-left: 57px; padding-top: 5px">BLURB_POWER<br>'+
		'<p style="margin-left: 57px;" id="powerSummaryX"></p>'+
'</p></div></div></div>';
var messageDataX = "";
var lenPw = powerList.length;
for (var x = 0; x < lenPw; x++) {
	messageDataX += baseMessagePower;
	if (equipmentList[x].icon != undefined) {
		messageDataX = messageDataX.replace("POWER_ICON", powerList[x].icon);
	}
	else {
		messageDataX = messageDataX.replace("POWER_ICON", 'MissingNO_icon.png');
	}
	messageDataX = messageDataX.replace("powerSummaryX","powerSummary"+x);
	messageDataX = messageDataX.replace("BLURB_POWER",powerList[x].name);
}
document.getElementById('items').innerHTML += '<div class="column">' + messageDataX + '</div>';
updateTotals();
}
//This function adds or removes the stat contributions from each item
function sumStats(itemNum,seld) {
	for (var statsLoop = 0; statsLoop < Object.keys(stats).length; statsLoop++) {//loop through as many stats as there are
		if (equipmentList[itemNum].statValue[statsLoop] != undefined) {//If there is a stat contribution, add it here
			equipmentList[itemNum].statContribution[statsLoop] = 0;//set the stat contribution to 0
			switch(equipmentList[itemNum].statType[statsLoop]) {//Figure out how the stat scales
				case statScaling.MARK_AND_RARITY://Mark and rarity will take QTY * STAT * (Mk + Rarity)
				equipmentList[itemNum].statContribution[statsLoop] = equipmentList[itemNum].quantity * equipmentList[itemNum].statValue[statsLoop] * (equipmentList[itemNum].rarity + equipmentList[itemNum].mark);
				break;
				case statScaling.MARK_ONLY://Mark only will take QTY * STAT * (1+ Rarity) in most cases, new cases needed if this isn't the case
				equipmentList[itemNum].statContribution[statsLoop] = equipmentList[itemNum].quantity * equipmentList[itemNum].statValue[statsLoop] * (1 + equipmentList[itemNum].mark);
				break;
				case statScaling.FIXED://FIXED Doesn't care about mark or rarity. Even some things that can be upgraded will have fixed stats
				equipmentList[itemNum].statContribution[statsLoop] = equipmentList[itemNum].quantity * equipmentList[itemNum].statValue[statsLoop];
				break;
				case "PM CrtH":
				equipmentList[itemNum].statContribution[statsLoop] = preTotalStats[stats.EPG]*0.001;
				break;
				case "PM CrtD":
				equipmentList[itemNum].statContribution[statsLoop] = Math.min(preTotalStats[stats.EPG]*0.002,0.5);
				break;
				case "APC5":
				equipmentList[itemNum].statContribution[statsLoop] = Math.round(preTotalStats[stats.AUX_POWER]*0.0005*100)/100;
				break;
				case "APC6":
				equipmentList[itemNum].statContribution[statsLoop] = Math.round(preTotalStats[stats.AUX_POWER]*0.0005*1.25*100)/100;
				break;
				case "ColCrit":
				equipmentList[itemNum].statContribution[statsLoop] = Math.round(Math.max(0.05,(equipmentList[itemNum].quantity-(100/3))*0.0015+0.05)*100)/100;
				break;
				default://If it isn't one of these types of issues, then we need to throw an error
				console.log("There's a problem summing stats for " + equipmentList[itemNum].name + " " +statsLoop);
			}
			totalStats[equipmentList[itemNum].statItem[statsLoop]] += equipmentList[itemNum].statContribution[statsLoop] * seld;
			equipmentList[itemNum].statContribution[statsLoop] = Math.round(equipmentList[itemNum].statContribution[statsLoop]*100)/100;//Update the contribution value on the card
		}
	}
}
//This function updates the totals by summing up each contribution
function updateTotals() {
for (var statsLoop = 0; statsLoop < Object.keys(stats).length; statsLoop++) {//clear the totals for both primary and secondary totals
totalStats[statsLoop] = 0;//this is the first pass at totals
preTotalStats[statsLoop] = 0;//this is the storage of the first pass at totals, for powers that derive their strength based on totals
}
totalStats[stats.AUX_POWER] = document.getElementById('AUX_NUM').value;
restorePoint = "|"
for (var itemNum = 0; itemNum < equipmentList.length; itemNum++) {
	sumStats(itemNum,equipmentList[itemNum].active);//This updates the stats for each power
	if (equipmentList[itemNum].active) {
		restorePoint += itemNum;
		if (equipmentList[itemNum].quantity > 1) {
			restorePoint += ".q" + equipmentList[itemNum].quantity;
		}
		if (!equipmentList[itemNum].unique) {
			restorePoint += ".m" + equipmentList[itemNum].mark +
			".r" + equipmentList[itemNum].rarity;
		}
		restorePoint += "|";
	}
}
for (var statsLoop = 0; statsLoop < Object.keys(stats).length; statsLoop++) {
preTotalStats[statsLoop] = totalStats[statsLoop];
totalStats[statsLoop] = 0;
}
totalStats[stats.AUX_POWER] = document.getElementById('AUX_NUM').value;
for (var itemNum = 0; itemNum < equipmentList.length; itemNum++) {
	sumStats(itemNum,equipmentList[itemNum].active);
	for (var statsLoop = 0; statsLoop < Object.keys(stats).length; statsLoop++) {//loop through as many stats as there are
		if (equipmentList[itemNum].statValue[statsLoop] != undefined) {
			if (statsLoop == 0) {//Update the contribution string for the card. For the first item, its "+BLAH"
				document.getElementById("contrib" + itemNum).innerHTML = '+' + equipmentList[itemNum].statContribution[statsLoop] + ' ' + statsFriendly[equipmentList[itemNum].statItem[statsLoop]];
			}
			else {//For 1+n items, its ", BLAH"
				document.getElementById("contrib" + itemNum).innerHTML += ', ' + equipmentList[itemNum].statContribution[statsLoop] + ' ' + statsFriendly[equipmentList[itemNum].statItem[statsLoop]];
			}
		}
	}
}
	
document.getElementById('EPG').innerHTML = Math.round(totalStats[stats.EPG]*1000)/1000;
document.getElementById('Cat1').innerHTML = Math.round(totalStats[stats.Cat1_EXOTIC]*1000)/1000;
document.getElementById('Cat2').innerHTML = Math.round((totalStats[stats.Cat2_EXOTIC])*1000)/1000;
document.getElementById('CrtH').innerHTML = Math.round((totalStats[stats.CrtH_EXOTIC])*1000)/1000;
document.getElementById('CrtD').innerHTML = Math.round((totalStats[stats.CrtD_EXOTIC])*1000)/1000;
//document.getElementById('AUXMAX').innerHTML = Math.round(totalStats[stats.MAX_AUX_POWER]*1000)/1000;
var powerText = [null];
//This sums up the power tooltip values, based on the different types of equations
for (var x = 0; x < powerList.length; x++) {
	document.getElementById('powerSummary'+x).innerHTML = '';
	for (var tier = 1; tier <= powerList[x].levels; tier++) {
		switch(powerList[x].equation) {
		case "A"://Normal equation
			powerText[tier] = powerList[x].base[tier] * (1+powerList[x].baseCat1+totalStats[stats.Cat1_EXOTIC]+totalStats[stats.EPG]*0.005) * (1+totalStats[stats.Cat2_EXOTIC])
			if(powerList[x].auxScale) {
				powerText[tier] *= (0.005 * totalStats[stats.AUX_POWER] + 0.5);
			}
			break;
		case "B"://EPG is seperate factor in the equation (there's a few of these)
			powerText[tier] = powerList[x].base[tier] * (1+powerList[x].baseCat1+totalStats[1])*(1+totalStats[stats.EPG]*0.005) * (1+totalStats[stats.Cat2_EXOTIC])
			if(powerList[x].auxScale) {
				powerText[tier] *= (0.005 * totalStats[stats.AUX_POWER] + 0.5);
			}
			break;
		case "TWC"://Tholian web cannon is Base * (Cat1*Cat2 + Cat1 + Cat2 + 4)
			powerText[tier] = powerList[x].base[tier] * ((powerList[x].baseCat1+totalStats[stats.Cat1_EXOTIC]+totalStats[stats.EPG]*0.005) * (totalStats[stats.Cat2_EXOTIC])+(powerList[x].baseCat1+totalStats[stats.Cat1_EXOTIC]+totalStats[stats.EPG]*0.005)+(totalStats[stats.Cat2_EXOTIC])+4)
			break;
		case "TC"://Timeline collapse has a different AUX scaling
			powerText[tier] = powerList[x].base[tier] * (1+powerList[x].baseCat1+totalStats[stats.Cat1_EXOTIC]+totalStats[stats.EPG]*0.005) * (1+totalStats[stats.Cat2_EXOTIC])
			if (tier == 1) {
			powerText[tier] *= (0.0034 * totalStats[stats.AUX_POWER] + 0.659);
			}
			else if (tier == 2) {
			powerText[tier] *= (0.0031 * totalStats[stats.AUX_POWER] + 0.687);
			}
			else if (tier == 3) {
			powerText[tier] *= (0.0028 * totalStats[stats.AUX_POWER] + 0.715);
			}
			break;
		default://If there is an equation type called that isn't set up yet
			console.log("There is an equiation that is set up poorly for " + powerList[x].name);
			break;
		}
		powerText[tier] = Math.round(powerText[tier]*10)/10;//Rounds the tooltip value to 1 decimal place
		document.getElementById('powerSummary'+x).innerHTML += "Rank " + tier + ": " + powerText[tier] + ' | ';//Updates the power card with the calculated values
	}
	var tempString = document.getElementById('powerSummary'+x).innerHTML;
	document.getElementById('powerSummary'+x).innerHTML = tempString.slice(0,tempString.length-3);
}
}
</script>
</body>
</html>
